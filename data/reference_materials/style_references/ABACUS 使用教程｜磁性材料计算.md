# ABACUS ä½¿ç”¨æ•™ç¨‹ï½œç£æ€§ææ–™è®¡ç®—

ä½œè€…ï¼šéƒ‘å¤§ä¹Ÿ ; å•ä½ï¼šAISIï¼›è”ç³»æ–¹å¼ï¼šzhengdy@bjaisi.com

## **ä»‹ç»**

ææ–™çš„ç£æ€§å¯¹åº”çš„å¾®è§‚ç”µå­ç»“æ„ä¸º**ç”µå­è‡ªæ—‹çš„æ–¹å‘å¹¶ä¸å‡åŒ€åˆ†å¸ƒ**ã€‚

åœ¨DFTä¸­ï¼Œç”µå­çš„åˆ†å¸ƒè¡¨ç¤ºä¸º(ç”µè·å¯†åº¦)ï¼Œå¸¦ç”µå­è‡ªæ—‹çš„ç”µå­çš„åˆ†å¸ƒè¡¨ç¤ºä¸º(ç”µè·å¯†åº¦+ç£å¯†åº¦)ã€‚

### **å…±çº¿ç£çŸ©ï¼ˆNSPIN=2ï¼‰**

ç»å¤§å¤šæ•°çš„ç£æ€§ææ–™è®¡ç®—ä¸­ï¼Œç”µå­çš„è‡ªæ—‹åªä¼šå¹³è¡Œæ’åˆ—ï¼ˆç£å„å‘åŒæ€§ï¼‰ï¼Œè¿™æ—¶ä»»æ„é€‰å®šä¸€ä¸ªæ–¹å‘ä¸º(spin-up)ï¼Œå…¶åæ–¹å‘åˆ™ä¸º(spin-down)ï¼ŒABACUSä¸­ï¼Œé€‰å–æ²¿zè½´æ–¹å‘ä¸ºï¼Œå…¶åæ–¹å‘ä¸ºã€‚

æ­¤æ—¶çš„ç”µè·å¯†åº¦è¡¨ç¤ºä¸º,åœ¨ABACUSè¾“å‡ºçš„ç”µè·å¯†åº¦æ–‡ä»¶ä¸­ï¼Œåˆ†åˆ«å¯¹åº”SPIN1_CHGå’ŒSPIN2_CHGã€‚

#### **ç”µå­èƒ½çº§**

ä¸è€ƒè™‘ç”µå­è‡ªæ—‹çš„å æ®æ€èƒ½çº§ä¸ºè‡ªæ—‹å‘ä¸Šçš„èƒ½çº§å’Œè‡ªæ—‹å‘ä¸‹çš„èƒ½çº§ç›¸åŒï¼Œç”±åŒä¸€ä¸ªèƒ½çº§è¡¨ç¤ºï¼Œæ¯ä¸ªèƒ½çº§çš„ç”µå­å æ®æ•°ä¸º2ã€‚

NSPIN=2æƒ…å†µä¸‹çš„å æ®æ€èƒ½çº§ä¸ºè‡ªæ—‹å‘ä¸Šå’Œè‡ªæ—‹å‘ä¸‹çš„èƒ½çº§åˆ†åˆ«è¾“å‡ºï¼Œæ¯ä¸ªèƒ½çº§çš„ç”µå­å æ®æ•°ä¸º1ï¼Œå…±åŒè®¡ç®—è´¹ç±³èƒ½çº§ã€‚

è¾“å‡ºçš„èƒ½å¸¦æ–‡ä»¶åˆ†ä¸ºä¸åŒçš„è‡ªæ—‹æŒ‡æ ‡ï¼Œè‡ªæ—‹å‘ä¸Šå’Œè‡ªæ—‹å‘ä¸‹åˆ†åˆ«ä¸ºBANDS_1å’ŒBANDS_2ï¼Œç”±äºå…¶å…±äº«åŒæ ·çš„è´¹ç±³é¢ï¼Œå¯ä»¥è¿›è¡ŒåŒæ ·çš„è´¹ç±³èƒ½å¹³ç§»åå…±åŒä½œå›¾ï¼Œç”¨äºå±•ç¤ºä¸åŒè‡ªæ—‹èƒ½å¸¦çš„å·®åˆ«ã€‚

#### **ç£çŸ©**

ç”±äºèƒ½çº§å¤§å°ä¸åŒï¼Œå¦‚æœè´¹ç±³èƒ½çº§ä»¥ä¸‹çš„ä¸åŒè‡ªæ—‹æŒ‡æ ‡çš„èƒ½çº§æ•°é‡ä¸åŒï¼Œå°†å¯¼è‡´ä½“ç³»æ•´ä½“å‡ºç°**ç£çŸ©ã€‚**

å¯¹åº”ABACUSè¾“å‡ºæ–‡ä»¶ä¸­çš„"TMAG"å…³é”®å­—ï¼Œå•ä½Bohr-magã€‚

å¯¹äºåé“ç£çš„æƒ…å†µï¼Œä½“ç³»çš„ç£å¯†åº¦å°†å‘ˆç°æ•´ä½“æ— ç£çŸ©ï¼Œå±€éƒ¨æœ‰ç£çŸ©çš„æƒ…å†µã€‚å¯¹äºè¯¥æƒ…å†µï¼ŒABACUSæä¾›äº†ç»å¯¹ç£çŸ©ä¿¡æ¯ï¼Œå¯¹åº”è¾“å‡ºæ–‡ä»¶ä¸­çš„"AMAG"å…³é”®å­—ï¼Œå…¶å«ä¹‰ä¸ºæ¯ä¸ªå®ç©ºé—´æ ¼ç‚¹ä¸Šç”µè·å¯†åº¦ç»å¯¹å€¼çš„å’Œã€‚

æœ‰çš„ä½“ç³»ä¸­ï¼Œç£çŸ©é›†ä¸­åœ¨éƒ¨åˆ†åŸå­ä¸Šï¼Œè¿™äº›åŸå­çš„ç£çŸ©å¯ä»¥é€šè¿‡è®¾ç½®"out_mul 1"ï¼Œå¹¶ä»è¾“å‡ºçš„mulliken.txtæ–‡ä»¶ä¸­æŸ¥è¯¢æ¯ä¸ªåŸå­çš„ç”µè·é‡å’Œç£çŸ©ä¿¡æ¯ï¼ŒåŸå­ä¸Šä¸åŒè½¨é“ï¼ˆsã€pã€dï¼‰çš„ç”µè·é‡å’Œç£çŸ©ä¿¡æ¯ä¹Ÿå¯ä»¥ä»è¯¥æ–‡ä»¶ä¸­æŸ¥è¯¢ã€‚

### **éå…±çº¿ç£çŸ©ï¼ˆNSPIN=4ï¼‰**

æœ‰çš„ä½“ç³»ä¸­ï¼Œç”µå­çš„è‡ªæ—‹ä¼šæ²¿ä¸åŒæ–¹å‘æ’åˆ—ï¼ˆç£å„å‘å¼‚æ€§ï¼‰ï¼Œè¿™æ—¶ç£å¯†åº¦é€šè¿‡xï¼Œyï¼Œzä¸‰ä¸ªæ–¹å‘çš„æŠ•å½±è¡¨ç¤ºï¼ˆæ³¡åˆ©çŸ©é˜µå½¢å¼ï¼‰ï¼Œç”µè·å¯†åº¦è¡¨ç¤ºä¸º, åœ¨ABACUSè¾“å‡ºçš„ç”µè·å¯†åº¦æ–‡ä»¶ä¸­ï¼Œåˆ†åˆ«å¯¹åº”SPIN1_CHGã€SPIN2_CHGã€SPIN3_CHGã€SPIN4_CHGã€‚

æœ¬æ–‡æ¡£ä»¥å…±çº¿ç£çŸ©è®¡ç®—ä¸ºæ¡ˆä¾‹ï¼Œéå…±çº¿ç£çŸ©è®¡ç®—ä»…åšç®€è¦ä»‹ç»ã€‚

## **å‡†å¤‡**

### **è¾“å…¥å‚æ•°**

INPUTæ–‡ä»¶ä¸­ä¸ç£æ€§è®¡ç®—ç›¸å…³çš„è¾“å…¥å‚æ•°ä¸º

|                                                              | æ— ç£çŸ© | å…±çº¿ç£çŸ© | å…±çº¿ç£çŸ©+SOC | éå…±çº¿ç£çŸ© | éå…±çº¿ç£çŸ©+SOC | å¤‡æ³¨             |
| ------------------------------------------------------------ | ------ | -------- | ------------ | ---------- | -------------- | ---------------- |
| [nspin](http://abacus.deepmodeling.com/en/latest/advanced/input_files/input-main.html#nspin) | 1      | 2        | 4(å¯ç¼ºçœ)    | 4(å¯ç¼ºçœ)  | 4(å¯ç¼ºçœ)      | ç”µå­è‡ªæ—‹çš„è‡ªç”±åº¦ |
| éå…±çº¿ç£çŸ©ç›¸å…³å‚æ•°                                           |        |          |              |            |                |                  |
| [lspinorb](http://abacus.deepmodeling.com/en/latest/advanced/input_files/input-main.html#lspinorb) | 0      | 0        | 1            | 0          | 1              | SOCæ•ˆåº”å¼€å…³      |
| [noncolin](http://abacus.deepmodeling.com/en/latest/advanced/input_files/input-main.html#noncolin) | 0      | 0        | 0            | 1          | 1              | éå…±çº¿ç£çŸ©å¼€å…³   |

### **åˆå§‹ç£çŸ©**

ç£æ€§è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œç”±äºç”µè·å¯†åº¦å’Œç£å¯†åº¦åŒæ—¶è¿›è¡Œè‡ªæ´½è¿­ä»£ï¼Œä¸åˆç†çš„åˆå§‹ç£çŸ©å¯èƒ½æ±‚è§£å‡ºé”™è¯¯çš„ç£æ€ï¼Œåˆé€‚çš„åˆå§‹ç£çŸ©å¯¹äºè®¡ç®—å‡ºæ­£ç¡®çš„åŸºæ€éå¸¸é‡è¦ã€‚

åˆå§‹ç£çŸ©åœ¨STRUæ–‡ä»¶ä¸­è®¾ç½®ã€‚æ”¯æŒä¸‰ç§è®¾ç½®æ–¹å¼

1. æŒ‰å…ƒç´ è®¾ç½®ç£çŸ©
2. æŒ‰åŸå­è®¾ç½®ç£çŸ©
3. å…ƒç´ å’ŒåŸå­æ··åˆè®¾ç½®

#### **ä¾‹ï¼š2ä¸ªFeåŸå­çš„åé“ç£è®¾ç½®**

##### **æŒ‰å…ƒç´ è®¾ç½®ç£çŸ©ä¸º**


```INPUT
ATOMIC_SPECIES 
Fe1 1.000 Fe_ONCV_PBE-1.0.upf //å°†åˆå§‹ç£çŸ©ä¸åŒçš„FeåŸå­å½“ä½œä¸åŒçš„å…ƒç´ å¤„ç†ï¼Œè®¾ç½®æ ‡ç­¾Fe1å’ŒFe2 
Fe2 1.000 Fe_ONCV_PBE-1.0.upf 

... 

ATOMIC_POSITIONS
Direct 
Fe1 
4.0 //æŒ‰å…ƒç´ è®¾ç½®ç£çŸ©ï¼Œå¯¹æ‰€æœ‰Fe1åŸå­è®¾ç½®åˆå§‹ç£çŸ©4.0 
1 
0.00 0.00 0.00 
Fe2 
-4.0 //æŒ‰å…ƒç´ è®¾ç½®ç£çŸ©ï¼Œå¯¹æ‰€æœ‰Fe2åŸå­è®¾ç½®åˆå§‹ç£çŸ©-4.0 
1 
0.50 0.50 0.50
```

##### **æŒ‰åŸå­è®¾ç½®ç£çŸ©ä¸º**

```INPUT
ATOMIC_SPECIES
Fe 1.000 Fe_ONCV_PBE-1.0.upf 

... 

ATOMIC_POSITIONS 
Direct 
Fe 
0.0 
2 

0.00 0.00 0.00 mag 4.0 # æŒ‰åŸå­è®¾ç½®ç£çŸ©ï¼Œå¯¹è¯¥FeåŸå­è®¾ç½®åˆå§‹ç£çŸ©4.0 
0.50 0.50 0.50 mag -4.0 # æŒ‰åŸå­è®¾ç½®ç£çŸ©ï¼Œå¯¹è¯¥FeåŸå­è®¾ç½®åˆå§‹ç£çŸ©-4.0
```

##### **æŒ‰æ··åˆæ–¹å¼è®¾ç½®ç£çŸ©ä¸º**

```INPUT
ATOMIC_SPECIES 
Fe 1.000 Fe_ONCV_PBE-1.0.upf 

... 

ATOMIC_POSITIONS 
Direct 
Fe 
4.0 //æŒ‰å…ƒç´ è®¾ç½®ç£çŸ©ï¼Œå¯¹æ‰€æœ‰FeåŸå­è®¾ç½®åˆå§‹ç£çŸ©4.0 
2 
0.00 0.00 0.00 
0.50 0.50 0.50 mag -4.0 //æŒ‰åŸå­è®¾ç½®ç£çŸ©ï¼Œå¯¹è¯¥FeåŸå­è®¾ç½®åˆå§‹ç£çŸ©-4.0
```

#### **éå…±çº¿ç£çŸ©**

éå…±çº¿ç£çŸ©è®¾ç½®åˆå§‹ç£çŸ©ä¸»è¦ä½¿ç”¨æŒ‰åŸå­è®¾ç½®çš„æ–¹å¼ï¼Œè¿™æ˜¯å› ä¸ºæ¯ä¸ªåŸå­çš„ç£çŸ©çš„æ–¹å‘å¯èƒ½ä¸ä¸€è‡´ï¼Œä¸é€‚åˆæŒ‰ç…§å…ƒç´ å†…æ‰€æœ‰åŸå­è¿›è¡Œç»Ÿä¸€è®¾ç½®ï¼Œåªæœ‰zæ–¹å‘çš„ç£å¯†åº¦æ”¯æŒæŒ‰ç…§å…ƒç´ ç»Ÿä¸€è®¾ç½®ã€‚

åŸå­ä½ç½®åå¯ç”¨å…³é”®å­—æ–¹å¼è®¾ç½®åˆå§‹ç£çŸ©ï¼š

1. mag+angle1+angle2ï¼š
   1. mag è®¾ç½®ç£çŸ©çš„æ¨¡
   2. angle1 è®¾ç½®ç£çŸ©ä¸zè½´çš„å¤¹è§’
   3. angle2 è®¾ç½®ç£çŸ©åœ¨xyå¹³é¢å†…çš„æŠ•å½±ä¸xè½´çš„å¤¹è§’
2. mag
   1. mag è®¾ç½®ç£çŸ©çš„xã€yã€zä¸‰ä¸ªæ–¹å‘çš„åˆ†é‡

```INPUT
//æŒ‰åŸå­è®¾ç½®éå…±çº¿ç£çŸ©ä¸¤ç§æ–¹æ¡ˆï¼Œä»¥æ²¿xæ–¹å‘åˆå§‹ç£çŸ©ä¸ºä¾‹ 
x y z mag 4.0 angle1 90 angle2 0 
x y z mag 4.0 0.0 0.0
```

### **é™åˆ¶ç£çŸ©**

æœ‰æ—¶åŸºäºç‰¹æ®Šçš„è®¡ç®—éœ€æ±‚ï¼Œéœ€è¦ç¨‹åºèƒ½æ”¶æ•›åˆ°ç›®æ ‡çš„ç£çŸ©å¯¹åº”çš„æ€ï¼ŒABACUSæ”¯æŒä¸‹åˆ—å‡ ç§æ–¹å¼å¯¹ç£çŸ©è¿›è¡Œé™åˆ¶

1. å›ºå®šç£çŸ©å¤§å°
   1. ç›¸å…³è¾“å…¥å‚æ•° [nupdown](https://abacus.deepmodeling.com/en/latest/advanced/input_files/input-main.html#nupdown) ï¼›
   2. è®¾å®šè¯¥å‚æ•°ä¼šä½¿è¿­ä»£è¿‡ç¨‹ä¸­çš„æ€»ç£çŸ©ï¼ˆå…³é”®å­—TMAGï¼‰å’Œè‡ªæ—‹å‘ä¸Šå’Œè‡ªæ—‹å‘ä¸‹çš„æ€»ç”µå­æ•°ä¿æŒä¸å˜ã€‚
   3. ä»…æ”¯æŒnspin=2çš„å…±çº¿ç£çŸ©è®¡ç®—ï¼›
   4. ä¾‹ï¼š

```
INPUTï¼š"nupdown 1.0"
--------------------------------------------
screen output:
...
 START CHARGE      : atomic
 DONE(0.388764   SEC) : INIT SCF
 ITER   TMAG      AMAG      ETOT(eV)       EDIFF(eV)      DRHO       TIME(s)    
 GE1    1.00e+00  1.00e+00  -2.034151e+02  0.000000e+00   1.630e-01  2.461e-01  
 GE2    1.00e+00  1.00e+00  -2.034549e+02  -3.983440e-02  4.269e-02  1.795e-01  
 GE3    1.00e+00  1.00e+00  -2.034571e+02  -2.200312e-03  1.676e-02  1.818e-01  
 GE4    1.00e+00  1.00e+00  -2.034575e+02  -4.430722e-04  6.254e-03  1.778e-01  
 GE5    1.00e+00  1.00e+00  -2.034579e+02  -3.166018e-04  6.657e-03  1.776e-01  
 GE6    1.00e+00  1.00e+00  -2.034580e+02  -1.795312e-04  3.370e-03  1.797e-01  
 ...
 ```

2. å›ºå®šèƒ½çº§å æ®æ•°
   1. ç›¸å…³è¾“å…¥å‚æ•°[ocp](https://abacus.deepmodeling.com/en/latest/advanced/input_files/input-main.html#ocp)ã€[ocp_set](https://abacus.deepmodeling.com/en/latest/advanced/input_files/input-main.html#ocp-set) ï¼›
   2. æ”¯æŒå…±çº¿ç£çŸ©å’Œéå…±çº¿ç£çŸ©è®¡ç®—ã€‚
3. ç›®å‰ä¸æ”¯æŒå¯¹ç›®æ ‡åŸå­ç£çŸ©è¿›è¡Œé™åˆ¶ï¼Œå¦‚æœæœ‰è¯¥éœ€æ±‚è¯·å‰å¾€Githubæäº¤Issueã€‚

## **æµç¨‹**

1. å‡†å¤‡è¾“å…¥æ–‡ä»¶INPUTã€STRUã€KPT

åœ¨ç¤ºä¾‹æ•°æ®é›†ä¸­ï¼Œæˆ‘ä»¬ä¸ºä½ å‡†å¤‡å¥½äº†ç£æ€§ææ–™è®¡ç®—çš„ç¤ºä¾‹æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®ï¼šï¼ˆä½ å¯ä»¥åœ¨å·¦ä¾§ç‚¹å‡»æ•°æ®é›†æŸ¥çœ‹ç›¸åº”æ–‡ä»¶ï¼‰ï¼š


```python
! tree /bohr/
```

    [01;34m/bohr/[0m
    â””â”€â”€ [01;34mabacus-magnetic-eu2y[0m
        â””â”€â”€ [01;34mv4[0m
            â””â”€â”€ [01;34mABACUS_Magnetic[0m
                â”œâ”€â”€ [01;32mINPUT[0m
                â”œâ”€â”€ [01;32mKPT[0m
                â”œâ”€â”€ [01;34mPP_ORB[0m
                â”‚Â Â  â”œâ”€â”€ [01;32mFe_ONCV_PBE-1.0.upf[0m
                â”‚Â Â  â””â”€â”€ [01;32mFe_gga_9au_100Ry_4s2p2d1f.orb[0m
                â”œâ”€â”€ [01;32mSTRU[0m
                â”œâ”€â”€ [01;32mjd[0m
                â”œâ”€â”€ [01;32mmulliken.txt.ref[0m
                â””â”€â”€ [01;32mresult.ref[0m
    
    4 directories, 8 files
    


```python
# å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæˆ‘ä»¬æ²¡æœ‰æ•°æ®é›†æ‰€åœ¨æ–‡ä»¶å¤¹çš„å†™å…¥æƒé™ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶å¤åˆ¶åˆ° `/data/` ç›®å½•ä¸‹:
! cp -nr /bohr/ /data/

# æˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰ä¸€äº›è·¯å¾„ï¼Œå¹¶åˆ‡æ¢åˆ°å·¥ä½œè·¯å¾„ï¼Œæ–¹ä¾¿åç»­è°ƒç”¨ï¼š
import os

bohr_dataset_url = "/bohr/abacus-magnetic-eu2y/v4/"  # url å¯ä»å·¦ä¾§æ•°æ®é›†å¤åˆ¶
work_path = os.path.join("/data", bohr_dataset_url[1:])
os.chdir(work_path)
print(f"å½“å‰è·¯å¾„ä¸ºï¼š{os.getcwd()}")
```

    å½“å‰è·¯å¾„ä¸ºï¼š/data/bohr/abacus-magnetic-eu2y/v4
    

2. è¿è¡ŒABACUSè¿›è¡Œè®¡ç®—


```bash
%%bash
# è¿›å…¥å·¥ä½œæ–‡ä»¶å¤¹
cd ./ABACUS_Magnetic
# OMP_NUM_THREADS=1 è¡¨ç¤ºä½¿ç”¨å•çº¿ç¨‹ï¼Œå¦‚æœä½ çš„æœºå™¨é…ç½®æ¯”è¾ƒé«˜ï¼Œå¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ¯”å¦‚ 4 çº¿ç¨‹ï¼Œå°±å¯ä»¥å†™æˆ OMP_NUM_THREADS=4
# mpirun -n åé¢çš„æ•°å­—è¡¨ç¤ºè®¡ç®—æ‰€ä½¿ç”¨çš„ CPU æ ¸å¿ƒæ•°ï¼Œè¿™é‡Œä½¿ç”¨ 2 ä¸ªæ ¸å¿ƒï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„æœºå™¨é…ç½®è¿›è¡Œä¿®æ”¹ã€‚
OMP_NUM_THREADS=1 mpirun -n 8 abacus
```

                                                                                         
                                  ABACUS v3.3.2
    
                   Atomic-orbital Based Ab-initio Computation at UStc                    
    
                         Website: http://abacus.ustc.edu.cn/                             
                   Documentation: https://abacus.deepmodeling.com/                       
                      Repository: https://github.com/abacusmodeling/abacus-develop       
                                  https://github.com/deepmodeling/abacus-develop         
                          Commit: e39b50efe (Fri Aug 18 16:14:25 2023 +0800)
    
     Wed Aug 23 15:48:56 2023
     MAKE THE DIR         : OUT.autotest/
    
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
     Warning: the number of valence electrons in pseudopotential > 8 for Fe: [Ar] 3d6 4s2
     Pseudopotentials with additional electrons can yield (more) accurate outcomes, but may be less efficient.
     If you're confident that your chosen pseudopotential is appropriate, you can safely ignore this warning.
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    
     UNIFORM GRID DIM     : 27 * 27 * 27
     UNIFORM GRID DIM(BIG): 9 * 9 * 9
     DONE(0.325904   SEC) : SETUP UNITCELL
     DONE(0.437724   SEC) : SYMMETRY
     DONE(0.584035   SEC) : INIT K-POINTS
     ---------------------------------------------------------
     Self-consistent calculations for electrons
     ---------------------------------------------------------
     SPIN    KPOINTS         PROCESSORS  NBASE       
     2       8               8           54          
     ---------------------------------------------------------
     Use Systematically Improvable Atomic bases
     ---------------------------------------------------------
     ELEMENT ORBITALS        NBASE       NATOM       XC          
     Fe      4s2p2d1f-9au    27          2           
     ---------------------------------------------------------
     Initial plane wave basis and FFT box
     ---------------------------------------------------------
     -------------------------------------------
     SELF-CONSISTENT : 
     -------------------------------------------
     START CHARGE      : atomic
     DONE(3.08722    SEC) : INIT SCF
     ITER   TMAG      AMAG      ETOT(eV)       EDIFF(eV)      DRHO       TIME(s)    
     GE1    -2.86e-05 6.10e+00  -6.436746e+03  0.000000e+00   6.827e-02  1.700e+00  
     GE2    1.95e-04  5.52e+00  -6.436994e+03  -2.474512e-01  4.754e-02  1.359e+00  
     GE3    -1.26e-03 6.18e+00  -6.437141e+03  -1.474680e-01  4.050e-02  1.303e+00  
     GE4    6.31e-03  5.84e+00  -6.437242e+03  -1.003170e-01  4.207e-03  1.289e+00  
     GE5    -1.52e-02 5.86e+00  -6.437243e+03  -1.038019e-03  3.567e-03  1.282e+00  
     GE6    1.84e-01  5.86e+00  -6.437239e+03  3.848510e-03   7.473e-03  1.290e+00  
     GE7    -8.89e-04 5.84e+00  -6.437245e+03  -6.203036e-03  1.454e-03  1.301e+00  
     GE8    1.01e-03  5.84e+00  -6.437245e+03  -7.251477e-05  8.716e-04  1.384e+00  
     GE9    -9.42e-04 5.84e+00  -6.437245e+03  4.144560e-05   7.210e-04  1.280e+00  
     GE10   -5.43e-04 5.84e+00  -6.437245e+03  -2.857215e-05  1.428e-04  1.287e+00  
     GE11   -2.72e-04 5.84e+00  -6.437245e+03  2.545174e-06   3.829e-05  1.296e+00  
     GE12   -9.46e-05 5.84e+00  -6.437245e+03  -2.067033e-06  3.511e-06  1.290e+00  
     ><><><><><><><><><><><><><><><><><><><><><><
     TOTAL-STRESS (KBAR):
     ><><><><><><><><><><><><><><><><><><><><><><
     -2.680e+02     3.022e-28      -1.511e-28     
     3.022e-28      -2.680e+02     2.267e-28      
     -1.511e-28     2.267e-28      -2.680e+02     
     TOTAL-PRESSURE: -2.680e+02 KBAR
    
      |CLASS_NAME---------|NAME---------------|TIME(Sec)-----|CALLS----|AVG------|PER%-------
                           total               24.349         9         2.7       1e+02     %
       Driver              driver_line         24.304         1         24        1e+02     %
       ORB_control         read_orb_first      0.13009        1         0.13      0.53      %
       LCAO_Orbitals       Read_Orbitals       0.13004        1         0.13      0.53      %
       ORB_control         set_orb_tables      2.2719         1         2.3       9.3       %
       ORB_gen_tables      gen_tables          2.2719         1         2.3       9.3       %
       ORB_table_phi       init_Table          1.5254         1         1.5       6.3       %
       ORB_table_phi       cal_ST_Phi12_R      1.505          232       0.0065    6.2       %
       ORB_table_beta      init_Table_Beta     0.55254        1         0.55      2.3       %
       ORB_table_beta      VNL_PhiBeta_R       0.5487         80        0.0069    2.3       %
       Ions                opt_ions            21.294         1         21        87        %
       ESolver_KS_LCAO     Run                 16.177         1         16        66        %
       HSolverLCAO         solve               15.854         12        1.3       65        %
       HamiltLCAO          updateHk            9.1716         96        0.096     38        %
       OperatorLCAO        init                8.7443         192       0.046     36        %
       Veff                contributeHk        8.7435         96        0.091     36        %
       Gint_interface      cal_gint            16.231         38        0.43      67        %
       Gint_interface      cal_gint_vlocal     8.6361         24        0.36      35        %
       Gint_Tools          cal_psir_ylm        1.3122         5832      0.00022   5.4       %
       Gint_k              folding_vl_k        0.10713        96        0.0011    0.44      %
       Nonlocal<LCAO>      contributeHR        0.2303         1         0.23      0.95      %
       LCAO_gen_fixedH     b_NL_mu_new         0.85455        2         0.43      3.5       %
       OperatorLCAO        folding_fixed       0.12975        96        0.0014    0.53      %
       LCAO_nnr            folding_fixedH      0.14014        104       0.0013    0.58      %
       HSolverLCAO         hamiltSolvePsiK     0.58803        96        0.0061    2.4       %
       DiagoElpa           elpa_solve          0.51311        96        0.0053    2.1       %
       ElecStateLCAO       psiToRho            6.0941         12        0.51      25        %
       LCAO_Charge         cal_dk_k            0.5703         12        0.048     2.3       %
       Gint_interface      cal_gint_rho        5.467          12        0.46      22        %
       Force_Stress_LCAO   getForceStress      5.1139         1         5.1       21        %
       Force_LCAO_k        ftable_k            5.0989         1         5.1       21        %
       Force_LCAO_k        allocate_k          1.1337         1         1.1       4.7       %
       Force_LCAO_k        cal_fvl_dphi_k      2.1278         1         2.1       8.7       %
       Gint_interface      cal_gint_force      2.1278         2         1.1       8.7       %
       Gint_Tools          cal_dpsir_ylm       0.77971        324       0.0024    3.2       %
       Gint_Tools          cal_dpsirr_ylm      0.15417        324       0.00048   0.63      %
       Force_LCAO_k        cal_fvnl_dbeta_k_new1.8147         1         1.8       7.5       %
     ----------------------------------------------------------------------------------------
    
     START  Time  : Wed Aug 23 15:48:56 2023
     FINISH Time  : Wed Aug 23 15:49:21 2023
     TOTAL  Time  : 25
     SEE INFORMATION IN : OUT.autotest/
    

3. åˆ†æç»“æœ
   1. æ¡ˆä¾‹ä¸­çš„ç»“æœä¸ºåé“ç£ï¼Œæ•´ä½“æ— ç£çŸ©ï¼ˆTMAG=0ï¼‰ï¼Œæœ‰ç›¸åçš„åŸå­ç£çŸ©å­˜åœ¨ï¼ˆAMAG != 0ï¼‰ã€‚
   2. **åŸå­ç£çŸ©ï¼ˆåŒ…æ‹¬spdè½¨é“ç£çŸ©ï¼‰**å¯ä»¥é€šè¿‡MullikenåŠŸèƒ½è¿›è¡Œè¾“å‡ºï¼Œåœ¨INPUTæ–‡ä»¶ä¸­è®¾ç½®å‚æ•°"out_mul 1", å¯ä»¥å¾—åˆ°è¾“å‡ºæ–‡ä»¶OUT.ABACUS/mulliken.txtä¸­çš„ç»“æœä¸º

```
...
Total Charge on atom  Fe           16.000364
Total Magnetism on atom  Fe           3.0904412
...
Total Charge on atom  Fe           15.999636
Total Magnetism on atom  Fe          -3.0905375
```

å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªFeåŸå­ç£çŸ©ç»“æœç›¸åï¼ˆéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæ¡ˆä¾‹ä¸­é€‰å–çš„è¾“å…¥å‚æ•°ç²¾åº¦ä¸è¶³ï¼Œç»“æœä»…ç”¨äºå±•ç¤ºè¾“å‡ºæ•ˆæœï¼‰

## **ç»“è¯­**

ç£æ€§è®¡ç®—åŠŸèƒ½å¸¸ç”¨äºé‡‘å±ï¼ŒåŠå¯¼ä½“ï¼Œè¿‡æ¸¡é‡‘å±æ°§åŒ–ç‰©ç­‰ææ–™ä¸­ã€‚

å…¶ä¸­éå…±çº¿ç£çŸ©è®¡ç®—å¸¸å’ŒSOCæ•ˆåº”è®¡ç®—åŒæ—¶ä½¿ç”¨ï¼Œå¯¹æ‹“æ‰‘ææ–™è®¡ç®—ä¸­çš„æ­£ç¡®è®¡ç®—æ‹“æ‰‘æ€§è´¨æœ‰é‡è¦æ„ä¹‰ã€‚

ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜è¯·åœ¨Githubä¸Šæäº¤Issueè¿›è¡Œåé¦ˆã€‚
